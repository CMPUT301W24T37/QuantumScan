Index: app/src/main/java/com/example/quantumscan/AttendeeFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.quantumscan;\r\n\r\nimport android.Manifest;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.os.Bundle;\r\nimport android.provider.Settings;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.ListView;\r\nimport android.widget.Toast;\r\nimport androidx.activity.result.ActivityResultLauncher;\r\nimport androidx.activity.result.contract.ActivityResultContracts;\r\nimport androidx.annotation.NonNull;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.fragment.app.Fragment;\r\n\r\n\r\n\r\nimport com.google.zxing.integration.android.IntentIntegrator;\r\nimport com.google.zxing.integration.android.IntentResult;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Objects;\r\n\r\npublic class AttendeeFragment extends Fragment {\r\n\r\n    private ActivityResultLauncher<String> requestCameraPermissionLauncher;\r\n    private ActivityResultLauncher<Intent> startForResult;\r\n\r\n    private ListView eventListView;\r\n    //private EventAdapter eventAdapter;\r\n    private ArrayList<Event> events; // Placeholder for your events data\r\n\r\n\r\n    private ArrayAdapter<String> eventAdapter;\r\n    private ArrayList<String> attendeeRole;\r\n    private String id;\r\n    private String UserID;\r\n\r\n    private ArrayList<String> dataList;\r\n    private ArrayList<String> eventIDList;\r\n\r\n\r\n\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        // Initialize the ActivityResultLauncher for camera permission request\r\n        requestCameraPermissionLauncher =\r\n                registerForActivityResult(new ActivityResultContracts.RequestPermission(), isGranted -> {\r\n                    if (isGranted) {\r\n                        startQRCodeScanner();\r\n                    } else {\r\n                        Toast.makeText(getContext(), \"Camera permission is needed to scan QR codes\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n                });\r\n\r\n        // Initialize the ActivityResultLauncher for starting the QR code scanner\r\n        startForResult =\r\n                registerForActivityResult(new ActivityResultContracts.StartActivityForResult(), result -> {\r\n                    IntentResult scanResult = IntentIntegrator.parseActivityResult(result.getResultCode(), result.getData());\r\n                    if (scanResult != null) {\r\n                        if (scanResult.getContents() == null) {\r\n                            Toast.makeText(getContext(), \"Cancelled\", Toast.LENGTH_LONG).show();\r\n                        } else {\r\n                            Toast.makeText(getContext(), \"Scanned: \" + scanResult.getContents(), Toast.LENGTH_LONG).show();\r\n\r\n                            Intent detailIntent = new Intent(getActivity(), EventInformationFragment.class);\r\n                            detailIntent.putExtra(\"eventID\", scanResult.getContents());\r\n                            detailIntent.putExtra(\"userID\", UserID);\r\n                            startActivity(detailIntent);\r\n                        }\r\n                    }\r\n//\r\n\r\n\r\n                });\r\n\r\n        // Initialize your events list here\r\n        events = new ArrayList<>();\r\n\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.fragment_attendee, container, false);\r\n\r\n        LinearLayout scanQRCodeButton = view.findViewById(R.id.buttonScanQR);\r\n        scanQRCodeButton.setOnClickListener(v -> startQRCodeScanner());\r\n\r\n        eventListView = view.findViewById(R.id.attendeeEventList);\r\n        dataList = new ArrayList<>();\r\n        eventIDList = new ArrayList<>();\r\n\r\n        eventAdapter = new ArrayAdapter<>(view.getContext(), R.layout.event_content, dataList);\r\n\r\n        FireStoreBridge fb = new FireStoreBridge(\"USER\");\r\n        fb.retrieveUser(getCurrentUserId(), new FireStoreBridge.OnUserRetrievedListener() {\r\n            @Override\r\n            public void onUserRetrieved(User user, ArrayList<String> attendeeRoles, ArrayList<String> organizerRoles) {\r\n                for(String event : attendeeRoles){\r\n                    eventIDList.add(event);\r\n                    System.out.println(event);\r\n                }\r\n                System.out.println(user.getId());\r\n                System.out.println(user.getName());\r\n                System.out.println(attendeeRoles.size());\r\n                //System.out.println(attendeeRoles.get(0));\r\n\r\n                FireStoreBridge fb_events = new FireStoreBridge(\"EVENT\");\r\n                fb_events.retrieveAllEvent(new FireStoreBridge.OnEventRetrievedListener() {\r\n                    @Override\r\n                    public void onEventRetrieved(ArrayList<Event> events, ArrayList<String> organizerList) {\r\n                        for(String eventID : eventIDList){\r\n\r\n                            for(Event event: events){\r\n                                if(Objects.equals(eventID, event.getId())){\r\n                                    System.out.println(\"Size\"+ event.getTitle());\r\n                                    dataList.add(event.getTitle());\r\n                                }\r\n                            }\r\n                        }\r\n                        eventAdapter.notifyDataSetChanged();\r\n\r\n                    }\r\n                });\r\n\r\n            }\r\n        });\r\n\r\n        eventListView.setAdapter(eventAdapter);\r\n\r\n\r\n        /**\r\n         跳转到Attendee_Eventpage\r\n         */\r\n\r\n        eventListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\r\n                String selectedEventName = dataList.get(position);\r\n                String selectedEventID = eventIDList.get(position);\r\n                Intent detailIntent = new Intent(getActivity(), AttendeeEventPage.class);\r\n                detailIntent.putExtra(\"eventID\", selectedEventID);\r\n                detailIntent.putExtra(\"eventName\", selectedEventName);\r\n                startActivity(detailIntent);\r\n            }\r\n        });\r\n\r\n\r\n        return view;\r\n    }\r\n\r\n    private void startQRCodeScanner() {\r\n        if (ContextCompat.checkSelfPermission(getContext(), Manifest.permission.CAMERA) == PackageManager.PERMISSION_GRANTED) {\r\n            IntentIntegrator integrator = new IntentIntegrator(getActivity());\r\n            Intent intent = integrator.createScanIntent();\r\n            startForResult.launch(intent);\r\n        } else {\r\n            requestCameraPermissionLauncher.launch(Manifest.permission.CAMERA);\r\n        }\r\n    }\r\n    private String getCurrentUserId() {\r\n        String userId = Settings.Secure.getString(this.getContext().getContentResolver(), Settings.Secure.ANDROID_ID);\r\n        return userId;\r\n\r\n    }\r\n\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/quantumscan/AttendeeFragment.java b/app/src/main/java/com/example/quantumscan/AttendeeFragment.java
--- a/app/src/main/java/com/example/quantumscan/AttendeeFragment.java	(revision 7cc6cce02c6bfd86baf005e086186cd9667fb884)
+++ b/app/src/main/java/com/example/quantumscan/AttendeeFragment.java	(date 1711869203403)
@@ -114,7 +114,7 @@
                 System.out.println(user.getId());
                 System.out.println(user.getName());
                 System.out.println(attendeeRoles.size());
-                //System.out.println(attendeeRoles.get(0));
+                System.out.println(attendeeRoles.get(0));
 
                 FireStoreBridge fb_events = new FireStoreBridge("EVENT");
                 fb_events.retrieveAllEvent(new FireStoreBridge.OnEventRetrievedListener() {
@@ -170,6 +170,7 @@
         }
     }
     private String getCurrentUserId() {
+
         String userId = Settings.Secure.getString(this.getContext().getContentResolver(), Settings.Secure.ANDROID_ID);
         return userId;
 
